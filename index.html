<input id='talk_topic' autofocus=true autocomplete='off' class='speech' width="100%" height="400" readonly='true' />
<p>ğŸ¤ ä½ èªªæˆ‘ç­” | Just say what you want</p>
<p>ğŸ¤ è«‹å…ˆæˆæ¬Šä½¿ç”¨éº¥å…‹é¢¨</p>
<p>ğŸ¤ Need to use microphone</p>
<p>âš ï¸ Chrome on Android and Desktop only.</p>
<h4>âš ï¸ åªæ”¯æ´é›»è…¦ç‰ˆã€Android ç‰ˆ Chrome</h4>
<h4>ğŸ¤ è‹¥çµæœä¸å°çš„è©±ï¼ŒæŒ‰ä¸Šä¸€é å›ä¾†æ›å¥è©±èªªå§</h4>
<h4>ğŸ¤ Go back to previous page and use other words if you do not get it!</h4>
<a href='https://github.com/leo424y/xord'>Source Code</a>

<script>

var a=0;
var aw='';
var b=0;

var int1;
var timer=0;

var delayInMilliseconds = 2000; //1 second

var items=[
'è²·ä¸€é€ä¸€çœŸçš„å‡çš„',
'æ‰“çµ¦0987654321',
'æˆ‘å¿«åˆ°å®¶äº† ç°¡è¨Šçµ¦åª½åª½ (MAC only)',
'ç¶­åŸºç™¾ç§‘å°ç£', 
'å…¬è¦–çš„Youtube', 
'ç¾éº—çš„å°èª',
'æˆ‘æ„›ä½ çš„æŠ¬æ¤…', 
'èŒèŠ½çš„é˜¿ç¾èª',
'ä¸å®ˆä¸­çš„æ”¿æ²»ç»é‡‘',
'äº”æœˆå¤©çš„Facebook',
'å‘¨æ°å€«çš„IG', 
'å‘¨å­ç‘œçš„FB',
'æŸ¯æ–‡å“²çš„æ–°è', 
'å€ªåŒ¡çš„æ›¸',
'é˜¿æ ¹å»·æ¢æˆˆ',
'ç®¡æ¨‚è¡¨æ¼”', 
'èŠå¤©æ©Ÿå™¨äºº',
'æ„›æ¨‚é›»å°',
'ææ¬¾æ©Ÿåœ¨å“ª',
'åŠ æ²¹ç«™åœ¨å“ª',
'è…³è¸è»Šç«™åœ¨å“ª',
'è‡­è±†è…å¤–é€',
'é™„è¿‘çš„æ´»å‹•',
'é’èœçš„è‹±æ–‡',
'ç°¡å ±çš„æ–‡ä»¶',
'èšé¤çš„è¡Œç¨‹',
'éŸ³ç¬¦çš„åœ–ç‰‡',
'é‡é‡è¨“ç·´çš„æ–‡ç»',
'é€¢ç”²çš„æ°‘å®¿',
'æ°‘ä¸»çš„æ–‡ç« ',
'èŠå¤©æ©Ÿå™¨äººçš„ç¨‹å¼ç¢¼',
'è‡ªæ‹çš„ç›¸ç‰‡',
'DHH',
'æ—ä½³é¾å€™é¸äºº',
'äºŒåäºŒç¢³å…­çƒ¯é…¸',
'å—æ¸¯å€å¤©æ°£',
'å°ç£ç¾è¡“é¤¨çš„ç‰¹å±•'
]

clearInterval(int1);
int1 = setInterval(
  function()
  {
    aw = document.getElementById("talk_topic").value;
    a = aw.length;
    // sw = window.getSelection().toString();
    // s = sw.length;
    if (a!==b){timer=0}
    if (a!=0 && timer>2){
      timer=-1000
      document.getElementById("talk_topic").value = document.getElementById("talk_topic").value.trim();
      redirect_page();
    //   document.getElementById("my_talk_form").submit();
    //   document.getElementById("talk_topic").readOnly = true;
    //   document.getElementById("my_talk_form").reset();
    }
    else{
      b=a;
      timer=timer+0.5;
      document.getElementById("talk_topic").placeholder = items[Math.floor(Math.random()*items.length)];
    }
  }, 500);

  function redirect_page() {
    var user_input = document.getElementById("talk_topic").value
    var parsed_user_input = ''
    if (user_input == 'ä½ å¥½'){
        parsed_user_input='google.com';
    } else if (user_input == 'æ„›æƒ…'){      
        parsed_user_input='facebook.com';
    } else {
        parsed_user_input='twitter.com';        
    }

    window.location.href = parsed_user_input;
  }

  // speech
  var text = document.querySelector(".speech");
  // var startBtn = document.querySelector(".start");

  var recognition = new webkitSpeechRecognition();
  // set params
  recognition.continuous = true;
  recognition.lang = 'zh-TW';
  recognition.interimResults = true;

  // start immediately
  recognition.start();
  recognition.onresult = function(event) {
    var result = event.results[event.results.length - 1];
    text.innerHTML = result[result.length - 1 ].transcript;
  }

  // speech error handling
  recognition.onerror = function(event){
    console.log('error', event);
  }

  recognition.onend = function() {
    console.log("end");
    // auto restart
    recognition.start();
  }
</script>
